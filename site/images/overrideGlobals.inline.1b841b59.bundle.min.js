(()=>{"use strict";const{ownKeys:e}=Reflect,t=["toString","toLocaleString","valueOf"],r=(r,o,n)=>{const i=o[r];if(!i)return;let s=!1;try{const e=Object.getOwnPropertyDescriptor(o,r);e&&(s=e.enumerable||!1)}catch(e){console.warn(`Failed to get property descriptor for key "${r}":`,e)}globalThis.defineStrictProperty(r,i,o,s);const c=i?.prototype;if(c){const e=Object.getOwnPropertyDescriptors(c);Object.keys(e).forEach((r=>{const o=e[r];o&&((e,r,o,n)=>{const i=!(n["specs.thunderbolt.hardenArrayPush"]&&n["specs.thunderbolt.loadWebpackRuntimeInHead"])&&"push"===r&&Array.isArray(e);if("constructor"!==r&&!i&&"value"in o&&o.configurable&&!t.includes(String(r))){const{value:t,enumerable:n,get:i,set:s}=o,c={enumerable:n,configurable:!1,...t?{value:t,writable:!1}:{get:i,set:s}};Object.defineProperty(e,r,c)}})(c,r,o,n)}))}e(i).forEach((e=>{const t=Object.getOwnPropertyDescriptor(i,e);t&&(t.writable||t.configurable)&&globalThis.defineStrictProperty(e.toString(),i[e],i,t.enumerable)}))},o=e=>"string"==typeof e?decodeURIComponent(e).toLowerCase().trimStart():e,n=(e,t,r,o)=>{(e=>e?.set&&e?.get&&"function"==typeof e.set&&"function"==typeof e.get&&!e.get.toString().includes("[native code]")&&!e.set.toString().includes("[native code]"))(t)?Object.defineProperty(r||globalThis,e,{get:t.get,set:t.set,configurable:!1,enumerable:o||!1}):Object.defineProperty(r||globalThis,e,{value:t,writable:!1,configurable:!1,enumerable:o||!1})},i=()=>{const e=globalThis.open,t=document.open,r=(t,r,o)=>{const n="string"!=typeof t,i=e.call(window,t,r,o);return n||((s=t).startsWith("//")&&/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(`${location.protocol}:${s}`)&&(s=`${location.protocol}${s}`),!s.startsWith("http")||new URL(s).hostname===location.hostname)?{}:i;var s};defineStrictProperty("open",r,globalThis,!0),defineStrictProperty("open",((e,o,n)=>e?r(e,o,n):t.call(document,e,o,n)),document,!0)},s=document.createElement,c=(e,t)=>{const r=s.call(document,e,t),n=Element.prototype.setAttribute,i=Element.prototype.setAttributeNS;if("iframe"===o(e)){globalThis.defineStrictProperty("srcdoc",{get:()=>{},set:()=>{console.error("`srcdoc` is not allowed in iframe elements.")}},r,!1);const e=function(e,t){"srcdoc"!==e.toLowerCase()?n.call(r,e,t):console.error("`srcdoc` attribute is not allowed to be set.")},t=function(e,t,o){"srcdoc"!==t.toLowerCase()?i.call(r,e,t,o):console.error("`srcdoc` attribute is not allowed to be set.")};r.setAttribute=e,r.setAttributeNS=t}return r},a="client-binding",l="security_overrideGlobals",d=["/_api/v1/access-tokens","/_api/v2/dynamicmodel","/_api/one-app-session-web/v3/businesses"],p=e=>(e instanceof Headers?e.forEach(((t,r)=>{decodeURIComponent(r).toLowerCase()===a&&e.delete(r)})):Object.keys(e).forEach((t=>{decodeURIComponent(t).toLowerCase()===a&&delete e[t]})),e),u=e=>{let t=!0;const r=(e=>{let t,r;if(globalThis.Request&&e instanceof Request)t=e.url;else{if("function"!=typeof e?.toString)throw new Error("Unsupported type for url");t=e.toString()}try{return new URL(t).pathname}catch(e){return r=t.replace(/#.+/gi,"").split("?").shift(),r.startsWith("/")?r:`/${r}`}})(e),n=o(r);return d.some((e=>n.includes(e)))&&(t=!1),t},f=(e=globalThis)=>{const t=fetch;e.defineStrictProperty("fetch",(function(){const r=(o=arguments,globalThis.Request&&o[0]instanceof Request&&o[0]?.headers?p(o[0].headers):o[1]?.headers&&p(o[1].headers),o);var o;return u(arguments[0])?t.apply(e,Array.from(r)):new Promise(((e,t)=>{const r=new Error("TB002");window.fedops?.interactionStarted(r,l),t(r)}))}))};performance.mark("overrideGlobals started");const{isExcludedFromSecurityExperiments:b,experiments:g}=window.viewerModel;try{((e=globalThis)=>{Object.defineProperty(e,"defineStrictProperty",{value:n,writable:!1,enumerable:!1,configurable:!1})})(),i(),b||globalThis.defineStrictProperty("createElement",c,document,!0),g["specs.thunderbolt.hardenFetchAndXHR"]&&!b&&(f(),((e=globalThis)=>{const t=XMLHttpRequest;function r(){const e=new t,r=e.open,o=e.setRequestHeader;return e.open=function(){if(arguments.length<2||u(arguments[1]))return r.apply(e,Array.from(arguments));{const e=new Error("TB002");throw window.fedops?.interactionStarted(e,l),e}},e.setRequestHeader=function(t,r){decodeURIComponent(t).toLowerCase()!==a&&o.call(e,t,r)},e}Object.keys(t).forEach((e=>{r[e]=t[e]})),e.defineStrictProperty("XMLHttpRequest",r)})()),g["specs.thunderbolt.removeServiceWorker"]&&(()=>{if(navigator&&"serviceWorker"in navigator)navigator.serviceWorker.register=()=>console.log("Service worker registration is not allowed"),Promise.resolve()})(),(e=>{let t=[],o=[];const{experiments:n}=window.viewerModel;o=o.concat(["TextEncoder","TextDecoder"]),n["specs.thunderbolt.hardenClientGlobals_EventTarget"]&&!e&&(o=o.concat(["XMLHttpRequestEventTarget","EventTarget"])),n["specs.thunderbolt.hardenArray"]&&o.push("Array"),o=o.concat(["URL","JSON"]),e||(t=t.concat(["addEventListener","removeEventListener"])),t=t.concat(["encodeURI","encodeURIComponent","decodeURI","decodeURIComponent"]),n["specs.thunderbolt.hardenStringAndNumber"]&&(o=o.concat(["String","Number"])),e||o.push("Object"),o=o.concat(["Reflect"]),t.forEach((e=>{Object.freeze(globalThis[e]),["addEventListener","removeEventListener"].includes(e)&&globalThis.defineStrictProperty(e,document[e],document,!0),globalThis.defineStrictProperty(e,globalThis[e],globalThis,!0)})),o.forEach((e=>{r(e,globalThis,n)}))})(b),b||(defineStrictProperty("preventStringArgument",((e,t,r)=>{const o=r||globalThis,n=o[e];defineStrictProperty(e,(function(){const r=Array.from(arguments);if("string"!=typeof r[t])return n.apply(o,r);console.warn(`Calling ${e} with a String Argument at index ${t} is not allowed`)}),o)})),preventStringArgument("setTimeout",0),preventStringArgument("setInterval",0))}catch(e){window?.viewerModel?.mode.debug&&console.error(e);const t=new Error("TB006");window.fedops?.reportError(t,"security_overrideGlobals"),window.Sentry?window.Sentry.captureException(t):globalThis.defineStrictProperty("sentryBuffer",[t],window,!1)}performance.mark("overrideGlobals ended")})();
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/overrideGlobals.inline.1b841b59.bundle.min.js.map