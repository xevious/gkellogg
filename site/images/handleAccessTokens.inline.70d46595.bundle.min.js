(()=>{"use strict";const e=e=>"string"==typeof e?decodeURIComponent(e).toLowerCase().trimStart():e,o="client-session-bind",t=new Set([o,"client-binding","svSession","smSession","server-session-bind","wixSession2"].map((e=>e.toLowerCase()))),i=Object.getOwnPropertyDescriptor(Document.prototype,"cookie"),n=(e="")=>`${o}=; ${e} max-age=0; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT`,r=o=>{const i="string"==typeof o?o.split("=")[0].trim():o.name,n=e(i).toLowerCase();return t.has(n)},s=e=>{let o;return o="string"==typeof e?e.split(";").map((e=>e.trim())):e,o.filter((e=>!r(e)))},l="tbReady",a="security_overrideGlobals",{experiments:c,siteFeaturesConfigs:d,accessTokensUrl:g}=window.viewerModel,b=g,u={},m=(()=>{const e=document.cookie.split(";").map((e=>e.trim())).filter((e=>e?.startsWith(o)))[0]?.split("=")[1];return(()=>{const e=`domain=${location.hostname};`,o=n(),t=n(e);i.set.call(document,o),i.set.call(document,t)})(),e})();m&&(u["client-binding"]=m);let h=fetch;addEventListener(l,(function e(o){const{logger:t}=o.detail;try{window.tb.init({fetch:h,fetchHeaders:u})}catch(e){const o=new Error("TB003");t.meter(`${a}_${o.message}`,{paramsOverrides:{errorType:a,eventString:o.message}}),window?.viewerModel?.mode.debug&&console.error(e)}finally{removeEventListener(l,e),h=fetch}})),c["specs.thunderbolt.hardenFetchAndXHR"]||(window.fetchDynamicModel=()=>d.sessionManager.isRunningInDifferentSiteContext?Promise.resolve({}):fetch(b,{credentials:"same-origin",headers:u}).then((function(e){if(!e.ok)throw new Error(`[${e.status}]${e.statusText}`);return e.json()})),window.dynamicModelPromise=window.fetchDynamicModel()),Object.defineProperty(document,"cookie",{get(){const e=i.get.call(document);return s(e).join("; ")},set(o){const n=e(o.split(";")[0]);[...t].every((e=>!n?.startsWith(e.toLowerCase())))&&i.set.call(document,o)},enumerable:!0,configurable:!1}),(()=>{if(!globalThis.cookieStore)return;const e=globalThis.cookieStore.get.bind(globalThis.cookieStore),o=globalThis.cookieStore.getAll.bind(globalThis.cookieStore),i=globalThis.cookieStore.set.bind(globalThis.cookieStore),n=globalThis.cookieStore.delete.bind(globalThis.cookieStore);Object.defineProperty(globalThis.CookieStore.prototype,"get",{value:async o=>t.has(o.toLowerCase())?null:e.call(void 0,o),enumerable:!0,configurable:!1}),Object.defineProperty(globalThis.CookieStore.prototype,"getAll",{value:async()=>{const e=await o.call(void 0);return s(e)},enumerable:!0,configurable:!1}),Object.defineProperty(globalThis.CookieStore.prototype,"set",{value:async(...e)=>{const o=1===e.length?e[0].name:e[0];if(!r(o))return i.call(void 0,...e)},enumerable:!0,configurable:!1}),Object.defineProperty(globalThis.CookieStore.prototype,"delete",{value:async(...e)=>{const o=1===e.length?e[0].name:e[0];if(!r(o))return n.call(void 0,...e)},enumerable:!0,configurable:!1})})()})();
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/handleAccessTokens.inline.70d46595.bundle.min.js.map